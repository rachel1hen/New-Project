name: Run Chatterbox TTS

on: 
  workflow_dispatch:

jobs:
  run-tts:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: "3.10"

      - name: Install dependencies
        run: |
          pip install chatterbox_tts torch soundfile

      - name: Run TTS
        run: |
          python - <<'EOF'
          from chatterbox_tts import Chatter
          chatter = Chatter()
          audio = chatter.speak("Hello! This is Chatterbox running on GitHub Actions.")
          chatter.save(audio, "output.wav")
          EOF

      - name: Upload Audio
        uses: actions/upload-artifact@v4
        with:
          name: chatterbox-audio
          path: output.wav
